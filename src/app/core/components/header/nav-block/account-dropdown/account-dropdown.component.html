<button
  pButton
  type="button"
  class="p-button-outlined p-button-secondary"
  label="Аккаунт"
  icon="pi pi-sort-down"
  iconPos="right"
  (click)="op.toggle($event)"
>
  <i class="pi pi pi-sign-in mr-2"></i>
</button>

<p-overlayPanel #op>
  <ng-template pTemplate>
    <div
      class="
        overlay-panel
        flex flex-column
        justify-content-center
        align-items-center
      "
    >
      <div
        *ngIf="!isLogin"
        class="flex flex-column justify-content-center align-items-center"
      >
        <i
          class="pi pi-user"
          style="
            justify-content: center;
            display: flex;
            align-items: center;
            font-size: 4rem;
          "
        ></i>
        <p-button class="my-3" [label]="'Войти'" (click)="onLogin()"></p-button>
      </div>
      <span *ngIf="isLogin" class="block text-900 font-medium mb-2">{{
        userLogin
      }}</span>
      <div class="flex flex-column align-items-start">
        <div
          class="
            flex
            justify-content-center
            align-items-center
            cursor-pointer
            mb-2
          "
        >
          <i
            class="pi pi-list mr-2"
            style="justify-content: center; display: flex; align-items: center"
          ></i>
          <span [routerLink]="['/main', 'cart']" class="font-normal"
            >Корзина</span
          >
        </div>
        <hr />
        <div
          class="
            flex
            justify-content-center
            align-items-center
            cursor-pointer
            mb-2
          "
        >
          <i
            class="pi pi-star-o mr-2"
            style="justify-content: center; display: flex; align-items: center"
          ></i>
          <span class="font-normal">Избранные товары</span>
        </div>
        <div
          class="
            flex
            justify-content-center
            align-items-center
            cursor-pointer
            mb-2
          "
        >
          <i
            class="pi pi-list mr-2"
            style="justify-content: center; display: flex; align-items: center"
          ></i>
          <span class="font-normal">Лист ожидания</span>
        </div>
      </div>
      <div
        *ngIf="isLogin"
        class="
          flex
          justify-content-center
          align-items-center
          cursor-pointer
          text-pink-600
        "
        (click)="onLogout()"
      >
        <i
          class="pi pi-sign-out mr-2"
          style="justify-content: center; display: flex; align-items: center"
        ></i>
        <span class="font-normal">Выход</span>
      </div>
    </div>
  </ng-template>
</p-overlayPanel>

<div *ngIf="showOverlayModal" class="overlay-modal" (click)="onOverlay($event)">
  <div
    *ngIf="showLoginModal"
    class="surface-card p-4 shadow-2 border-round w-full lg:w-6"
  >
    <div class="flex justify-content-end">
      <button
        pButton
        pRipple
        type="button"
        icon="pi pi-times"
        class="p-button-rounded p-button-secondary p-button-outlined close"
      ></button>
    </div>
    <div class="text-center mb-5">
      <div class="text-900 text-3xl font-medium mb-3">Welcome Back</div>
      <span class="text-600 font-medium line-height-3"
        >Don't have an account?</span
      >
      <span
        (click)="onRegister()"
        class="font-medium no-underline ml-2 text-blue-500 cursor-pointer"
        >Create today!</span
      >
    </div>

    <div>
      <form (ngSubmit)="onSubmitLogin()" [formGroup]="loginForm">
        <label for="email" class="block text-900 font-medium mb-2">Email</label>
        <input
          formControlName="login"
          id="email"
          type="text"
          pInputText
          class="w-full mb-3"
        />

        <label for="password" class="block text-900 font-medium mb-2"
          >Password</label
        >
        <input
          formControlName="password"
          id="password"
          type="password"
          pInputText
          class="w-full mb-3"
        />

        <div class="flex align-items-center justify-content-between mb-6">
          <div class="flex align-items-center">
            <p-checkbox
              id="rememberme"
              [binary]="true"
              styleClass="mr-2"
            ></p-checkbox>
            <label for="rememberme">Remember me</label>
          </div>
          <a
            class="
              font-medium
              no-underline
              ml-2
              text-blue-500 text-right
              cursor-pointer
            "
            >Forgot your password?</a
          >
        </div>

        <button
          pButton
          pRipple
          label="Sign In"
          icon="pi pi-user"
          class="w-full"
        ></button>
      </form>
    </div>
  </div>

  <div
    *ngIf="showRegisterModal"
    class="surface-card p-4 shadow-2 border-round w-full lg:w-6"
  >
    <div class="flex justify-content-end">
      <button
        pButton
        pRipple
        type="button"
        icon="pi pi-times"
        class="p-button-rounded p-button-secondary p-button-outlined close"
      ></button>
    </div>
    <div class="text-center mb-5">
      <div class="text-900 text-3xl font-medium mb-3">Регистрация</div>
    </div>

    <form [formGroup]="profileForm" (ngSubmit)="onSubmitProfile()">
      <div class="pb-3">
        <div class="mb-3">
          <label for="firstName" class="block text-900 font-medium mb-2"
            >Имя</label
          >
          <input
            pInputText
            aria-describedby="firstName-help"
            id="firstName"
            type="text"
            formControlName="firstName"
            class="w-full"
          />
          <div
            *ngIf="
              firstName!.invalid && (firstName!.dirty || firstName!.touched)
            "
          >
            <small
              class="text-pink-600"
              id="firstName-help"
              *ngIf="firstName!.errors?.required"
            >
              *Обязательно для заполнения.
            </small>
            <small
              class="text-pink-600"
              id="firstName-help"
              *ngIf="firstName!.errors?.minlength"
            >
              *Минимум 2 символа.
            </small>
          </div>
        </div>

        <div class="mb-3">
          <label for="lastName" class="block text-900 font-medium mb-2"
            >Фамилия</label
          >
          <input
            pInputText
            aria-describedby="lastName-help"
            id="lastName"
            type="text"
            formControlName="lastName"
            class="w-full"
          />
          <div
            *ngIf="lastName!.invalid && (lastName!.dirty || lastName!.touched)"
          >
            <small
              class="text-pink-600"
              id="lastName-help"
              *ngIf="lastName!.errors?.required"
            >
              *Обязательно для заполнения.
            </small>
            <small
              class="text-pink-600"
              id="lastName-help"
              *ngIf="lastName!.errors?.minlength"
            >
              *Минимум 2 символа.
            </small>
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="block text-900 font-medium mb-2"
            >E-mail</label
          >
          <input
            id="email"
            type="email"
            formControlName="login"
            pInputText
            class="w-full"
            aria-describedby="email-help"
          />
          <div *ngIf="login!.invalid && (login!.dirty || login!.touched)">
            <small
              class="text-pink-600"
              id="email-help"
              *ngIf="login!.errors?.required"
            >
              *Обязательно для заполнения.
            </small>
            <small
              class="text-pink-600"
              id="email-help"
              *ngIf="login!.errors?.email"
            >
              *Должен быть введён корректный E-mail.
            </small>
          </div>
        </div>

        <div class="mb-3">
          <label for="password" class="block text-900 font-medium mb-2"
            >Пароль</label
          >
          <input
            pPassword
            id="password"
            type="password"
            formControlName="password"
            pInputText
            class="w-full"
            aria-describedby="password-help"
          />
          <div
            *ngIf="password!.invalid && (password!.dirty || password!.touched)"
          >
            <small
              class="text-pink-600"
              id="password-help"
              *ngIf="password!.errors?.required"
            >
              *Обязательно для заполнения.
            </small>
            <small
              class="text-pink-600"
              id="password-help"
              *ngIf="password!.errors?.minlength"
            >
              *Минимум 5 символа.
            </small>
          </div>
        </div>
      </div>
      <button
        type="submit"
        [disabled]="!profileForm.valid"
        pButton
        pRipple
        label="Регистрация"
        icon="pi pi-user"
        class="w-full"
      ></button>
    </form>
  </div>
</div>
